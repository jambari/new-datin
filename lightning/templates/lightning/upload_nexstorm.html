{% extends 'base.html' %} 

{% block content %}
<style>
    /* --- 1. LAYOUT UTAMA (PURE CSS) --- */
    body {
        margin: 0;
        padding: 0;
        overflow: hidden; /* Mencegah scroll ganda */
        background-color: #f4f6f9;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    /* Wrapper Pembungkus (Sidebar Kiri + Konten Kanan) */
    .custom-wrapper {
        display: flex;
        height: 100vh;
        width: 100%;
    }

    /* Area Konten Kanan */
    .custom-content {
        flex: 1; /* Mengisi sisa ruang */
        display: flex;
        flex-direction: column;
        overflow: hidden;
        position: relative;
    }

    /* Area Scrollable Utama */
    .scrollable-area {
        flex: 1;
        overflow-y: auto;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center; /* Posisi tengah */
    }

    /* --- 2. UPLOAD CARD STYLING --- */
    .upload-container {
        width: 100%;
        max-width: 600px;
        margin-top: 40px; /* Jarak dari atas */
    }

    .upload-card {
        background: #fff;
        border: 1px solid #d1d5db;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        overflow: hidden;
    }

    .upload-header {
        background-color: #063261; /* Warna biru header */
        color: white;
        padding: 15px 20px;
        font-weight: 600;
        font-size: 16px;
        display: flex;
        align-items: center;
        border-bottom: 1px solid #0056b3;
    }
    .upload-header i { margin-right: 10px; }

    .upload-body {
        padding: 30px;
    }

    .info-text {
        color: #666;
        font-size: 14px;
        margin-bottom: 25px;
        line-height: 1.6;
        background-color: #f8f9fa;
        padding: 15px;
        border-radius: 6px;
        border-left: 4px solid #17a2b8; /* Aksen info */
    }

    /* Form Elements */
    .form-group {
        margin-bottom: 25px;
    }

    .form-label {
        display: block;
        margin-bottom: 8px;
        font-weight: 700;
        color: #333;
        font-size: 14px;
    }

    /* Styling Input File Standar */
    .form-control-file {
        display: block;
        width: 100%;
        padding: 10px;
        border: 2px dashed #cbd5e1; /* Garis putus-putus */
        border-radius: 6px;
        background-color: #fdfdfd;
        cursor: pointer;
        transition: border-color 0.3s;
        box-sizing: border-box; /* Agar padding tidak merusak lebar */
    }
    .form-control-file:hover {
        border-color: #007bff;
        background-color: #f0f7ff;
    }

    /* Buttons */
    .btn-action {
        display: block;
        width: 100%;
        padding: 12px;
        border: none;
        border-radius: 6px;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        text-align: center;
        text-decoration: none;
        transition: background 0.2s, transform 0.1s;
    }

    .btn-submit {
        background-color: #063261;
        color: white;
        margin-bottom: 12px;
    }
    .btn-submit:hover { background-color: #0056b3; }
    .btn-submit:active { transform: translateY(1px); }

    .btn-cancel {
        background-color: #6c757d;
        color: white;
    }
    .btn-cancel:hover { background-color: #5a6268; }

    /* Messages */
    .alert-msg {
        padding: 15px;
        margin-bottom: 20px;
        border-radius: 6px;
        font-size: 14px;
        line-height: 1.4;
    }
    .alert-error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    .alert-success { background-color: #d1e7dd; color: #0f5132; border: 1px solid #badbcc; }

</style>

<div class="custom-wrapper">
    {% include 'partials/_sidebar.html' %}

    <div class="custom-content">
        {% include 'partials/_topbar.html' %}

        <main class="scrollable-area">
            
            <div class="upload-container">
                <div class="upload-card">
                    <div class="upload-header">
                        <i class="fas fa-cloud-upload-alt"></i> Upload NexStorm Data (Bulk)
                    </div>
                    
                    <div class="upload-body">
                        <div class="info-text">
                            <strong>Panduan:</strong><br>
                            1. Anda dapat memilih hingga <strong>7 file CSV</strong> sekaligus.<br>
                            2. Gunakan format nama file: <code>YYYYMMDD.csv</code> (contoh: <code>20251001.csv</code>).<br>
                            3. Sistem akan memproses data harian secara otomatis.
                        </div>
                        
                        {% if messages %}
                            {% for message in messages %}
                                <div class="alert-msg {% if message.tags == 'error' %}alert-error{% else %}alert-success{% endif %}">
                                    {{ message }}
                                </div>
                            {% endfor %}
                        {% endif %}

                        <form method="post" enctype="multipart/form-data">
                            {% csrf_token %}
                            
                            <div class="form-group">
                                <label class="form-label">Pilih File CSV</label>
                                {{ form.csv_file }}
                                
                                {% if form.csv_file.errors %}
                                    <div style="color: #dc3545; font-size: 13px; margin-top: 8px;">
                                        {{ form.csv_file.errors }}
                                    </div>
                                {% endif %}
                            </div>

                            <div style="margin-top: 30px;">
                                <button type="submit" class="btn-action btn-submit">
                                    <i class="fas fa-check-circle"></i> Proses Semua File
                                </button>
                                <a href="{% url 'lightning:nexstorm_query_page' %}" class="btn-action btn-cancel">
                                    <i class="fas fa-times-circle"></i> Batal
                                </a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

        </main>
    </div>
</div>
{% endblock %}