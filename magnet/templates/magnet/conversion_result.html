{% extends "base.html" %}
{% block content %}
<div class="flex h-screen bg-gray-100">
  {% include 'partials/_sidebar.html' %}
  <div class="flex-1 flex flex-col overflow-hidden">
    {% include 'partials/_topbar.html' %}
    <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-8">
      <h1 class="text-2xl font-bold text-gray-900">Conversion Result</h1>
      <div class="mt-6 p-6 bg-white rounded-lg shadow-md">
        <h2 class="text-xl font-semibold mb-4 text-gray-800">Data Saved & Converted</h2>
        <p class="mb-6">The original data has been saved. The grad values have been converted to Degrees, Minutes, and Seconds below. The next step is to automate filling the external form.</p>
        
        <h3 class="font-semibold text-gray-700">Converted Deklinasi (DMS)</h3>
        <div class="bg-gray-100 p-4 rounded-md mt-2 font-mono">
          {% for key, value in selenium_data.deklinasi_dms.items %}
            <p><strong>{{ key }}:</strong> {{ value.deg }}° {{ value.min }}' {{ value.sec }}"</p>
          {% endfor %}
        </div>
        
        <h3 class="font-semibold text-gray-700 mt-4">Converted Inklinasi (DMS)</h3>
        <div class="bg-gray-100 p-4 rounded-md mt-2 font-mono">
          {% for key, value in selenium_data.inklinasi_dms.items %}
            <p><strong>{{ key }}:</strong> {{ value.deg }}° {{ value.min }}' {{ value.sec }}"</p>
          {% endfor %}
        </div>
        
        <div class="mt-8 pt-6 border-t flex justify-between">
          <a href="{% url 'observation_form' %}" class="px-6 py-2 bg-gray-300 text-gray-800 font-semibold rounded-md hover:bg-gray-400">Back to Form</a>
          <a href="{% url 'trigger_automation' %}" class="px-6 py-2 bg-green-600 text-white font-semibold rounded-md hover:bg-green-700">
            Run Automation
          </a>
        </div>
      </div>
    </main>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const sidebar = document.getElementById('sidebar');
    const sidebarToggle = document.getElementById('sidebar-toggle');

    if (sidebarToggle) {
      sidebarToggle.addEventListener('click', function() {
        // This toggles the 'hidden' class on the sidebar for mobile
        sidebar.classList.toggle('hidden');
      });
    }
  });
</script>
{% endblock %}