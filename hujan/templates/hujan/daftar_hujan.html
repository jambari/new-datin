{% extends "base.html" %}
{% load tz %}
{% block content %}
<div class="flex h-screen bg-gray-100">
  {% include 'partials/_sidebar.html' %}
  <div class="flex-1 flex flex-col overflow-hidden">
    {% include 'partials/_topbar.html' %} 
    <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-8">
      <h1 class="text-3xl font-bold text-gray-900">Hujan</h1>
                <div class="bg-white shadow overflow-hidden sm:rounded-lg">
                  <table class="min-w-full leading-normal">
                      <thead>
                          <tr>
                              <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                                  Tanggal
                              </th>
                              
                              <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                                  Obs (mm)
                              </th>

                              <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                                  Hilman
                              </th>

                              <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                                  Kategori
                              </th>

                              <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                                  Keterangan
                              </th>

                              <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                                  Petugas
                              </th>

                              <th class="px-5 py-3 border-b-2 border-gray-200 bg-blue-100 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider">
                                  Aksi
                              </th>
                          </tr>
                      </thead>
                      <tbody>
                          {% for row in hujan_records %}
                          <tr>
                              <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                                  {{ row.tanggal }}
                              </td>

                              <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                                  {{ row.obs }}
                              </td>

                              <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                                  {{ row.hilman }}
                              </td>

                              <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                                  {{ row.kategori }}
                              </td>

                              <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                                  {{ row.keterangan|default:"-" }}
                              </td>

                              <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                                  {{ row.petugas }}
                              </td>
                              
                              <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm text-center">
                                  <a href="{% url 'edit_hujan' row.id %}" class="inline-flex items-center px-3 py-1 bg-green-600 hover:bg-yellow-500 text-white text-xs font-bold rounded">
                                      <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                      </svg>
                                      Edit
                                  </a>
                              </td>
                          </tr>
                          {% endfor %}
                      </tbody>
                  </table>
                </div>
                <div class="pagination mt-6 flex justify-center items-center">
                    <span class="step-links">
                        {% if hujan_records.has_previous %}
                            <a href="?page=1" class="px-3 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300">&laquo; first</a>
                            <a href="?page={{ hujan_records.previous_page_number }}" class="px-3 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300">previous</a>
                        {% endif %}

                        <span class="current-page px-4 py-2 text-sm font-medium text-gray-700">
                            Halaman {{ hujan_records.number }} dari {{ hujan_records.paginator.num_pages }}.
                        </span>

                        {% if hujan_records.has_next %}
                            <a href="?page={{ hujan_records.next_page_number }}" class="px-3 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300">next</a>
                            <a href="?page={{ hujan_records.paginator.num_pages }}" class="px-3 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300">last &raquo;</a>
                        {% endif %}
                    </span>
                </div>

    </main>
  </div>
</div>

<script>
  // JavaScript to toggle the advanced filter panel
  const filterBtn = document.getElementById('advanced-filter-btn');
  const filterPanel = document.getElementById('advanced-filter-panel');

  filterBtn.addEventListener('click', () => {
    filterPanel.classList.toggle('hidden');
  });
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const sidebar = document.getElementById('sidebar');
    const sidebarToggle = document.getElementById('sidebar-toggle');

    if (sidebarToggle) {
      sidebarToggle.addEventListener('click', function() {
        // This toggles the 'hidden' class on the sidebar for mobile
        sidebar.classList.toggle('hidden');
      });
    }
  });
</script>
{% endblock %}